{erl_opts, [
    debug_info,
    warnings,
    warn_unused_vars,
    warn_export_all,
    warn_shadow_vars,
    warn_obsolete_guard,
    warn_unused_import,
    warn_unused_function,
    warn_bif_clash,
    warn_export_vars,
    warn_untyped_record
]}.

%% Umbrella 项目配置
{project_app_dirs, [
    "apps/beamai_tools",
    "apps/beamai_agent",
    "apps/beamai_mcp",
    "apps/beamai_a2a",
    "apps/beamai_rag",
    "apps/beamai_deepagent"
]}.

{deps, [
    %% beamai 核心库 - 通过 git_subdir 从主仓库获取
    {beamai_core, {git_subdir, "https://github.com/TTalkPro/beamai.git", {branch, "main"}, "apps/beamai_core"}},
    {beamai_llm, {git_subdir, "https://github.com/TTalkPro/beamai.git", {branch, "main"}, "apps/beamai_llm"}},
    {beamai_memory, {git_subdir, "https://github.com/TTalkPro/beamai.git", {branch, "main"}, "apps/beamai_memory"}},
    %% 第三方依赖
    {jsx, "3.1.0"},
    {hackney, "1.20.1"},
    {gun, "2.1.0"},
    {uuid, "2.0.6", {pkg, uuid_erl}},
    {esqlite, "0.8.8"},
    {poolboy, "1.5.2"}
]}.

{shell, [
    {apps, [
        beamai_core,
        beamai_llm,
        beamai_memory,
        beamai_tools,
        beamai_agent,
        beamai_mcp,
        beamai_a2a,
        beamai_rag,
        beamai_deepagent
    ]}
]}.

{relx, [
    {release, {beamai_extra, "1.0.0"}, [
        beamai_core,
        beamai_llm,
        beamai_memory,
        beamai_tools,
        beamai_agent,
        beamai_mcp,
        beamai_a2a,
        beamai_rag,
        beamai_deepagent,
        sasl
    ]},
    {mode, dev},
    {include_erts, false},
    {extended_start_script, true}
]}.

{profiles, [
    {test, [
        {deps, [
            {meck, "0.9.2"}
        ]},
        {erl_opts, [debug_info]}
    ]}
]}.

{project_plugins, [rebar3_proper, rebar3_ex_doc]}.

{ex_doc, [
    {extras, [
        {"README.md", #{title => "Overview"}}
    ]},
    {main, "README.md"},
    {source_url, "https://github.com/TTalkPro/beamai"},
    {api_reference, true}
]}.

{alias, [
    {check, [xref, dialyzer, eunit, ct]}
]}.
